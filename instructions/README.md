# Как помочь с русификатором

- [Как поправить перевод](#как-поправить-перевод)
- [Как самостоятельно запаковать](#как-самостоятельно-запаковать)
- [Как распаковать пак из игры](#как-распаковать-пак-из-игры)

## Как поправить перевод

Текста на перевод лежат в папке [FormatString](../patch/Ru_Patch_Strings_Main_P/ZhuxianClient/gamedata/client/FormatString). 
Данные представлены в формате "ключ = значение". 
<br>Этот формат важно сохранять, игра будет искать перевод по ключу.

После правки перевода есть несколько вариантов:
1. Откройте Pull Request с изменениями (предпочтительный)
2. Пришлите скорректированный файл мне в дискорд (nuboskill)

Полезное для форматирования:
- \n - перенос на новую строку
- \t - табуляция
- // - комментарий

## Как самостоятельно запаковать

Для этого вам понадобится бесплатная утилита [repak](https://github.com/trumank/repak).
<br>После того как скачаете программу, запустите терминал из ее папки.

Команда для запаковки:
```bash
.\repak pack "D:\{путь до этого проекта}\patch\Ru_Patch_Strings_Main_P"
```

После запуска команды у вас в проекте обновится `Ru_Patch_Strings_Main_P.pak`.
<br>Можете положить его в папку с игрой, как обычно (в папку Paks в клиенте игры), 
и сами проверить свои изменения.

\* буду благодарен, если в свой Pull Request вы сразу положите обновленный пак 
и этого не придется делать мне (позже постараюсь прикрутить автоматическую сборку релиза)

## Как распаковать пак из игры

### Зачем нужно

Распаковка паков может быть нам полезна, если в игре появятся новые переводы (например, вышло обновление).
Наши файлы переводов необходимо актуализировать новыми ключами, иначе в игре не будет части текста,
так как игра не сможет найти значение по ключу.

### Зачем нужно

Распаковка паков может быть нам полезна, если в игре появятся новые переводы (например, вышло обновление).
Наши файлы переводов необходимо актуализировать новыми ключами, иначе в игре не будет части текста,
так как игра не сможет найти значение по ключу.

### Распаковка

В игре паки находятся по пути `D:\{путь до игры}\ZXSJ\Game\ZhuxianClient\Content\Paks`.
<br>На данный момент (10.05.2025) текста на перевод есть только в двух паках:
1. ClientGameData.pak <-- почти все здесь
2. ClientGameData_0_P.pak

Для распаковки понадобится бесплатный инструмент [QuickBMS](https://aluigi.altervista.org/quickbms.htm).
<br>Для него нужен правильный bms скрипт - [unreal_tournament_4_0.4.27e_zhuxian_world_ue5.bms](unreal_tournament_4_0.4.27e_zhuxian_world_ue5.bms). 
<br>Скачайте его и положите в папку с программой QuickBMS.

Пример вызова QuickBMS для распаковаки ClientGameData.pak:
```bash
.\quickbms_4gb_files unreal_tournament_4_0.4.27e_zhuxian_world_ue5.bms "D:\{путь до игры}\ZXSJ\Game\ZhuxianClient\Content\Paks\ClientGameData.pak" "D:\{куда распаковать}\ClientGameData"
```

Паки игры зашифрованы ключом (скрипт его спросит): 
```
0xD7D19A4349AAA02C53CD9282D0E3B5B8BEE592829DD2DF729EBD0D377E4CC47D
```

После чего ждем, пока QuickBMS сделает свою работу.

\* bms скрипт и ключ шифрования игры брались [отсюда](https://cs.rin.ru/forum/viewtopic.php?f=10&t=100672), если они больше не подходят можно покопаться в этом треде

### Где искать данные

Файлы переводов лежат по тому же пути как и в данном репозитории, то есть `ZhuxianClient/.../FormatString`.
